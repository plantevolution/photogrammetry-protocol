<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Image capture step-by-step | Flower photogrammetry and 3D modeling protocol</title>
  <meta name="description" content="This protocol is an evolving protocol used in the Joly lab at the Université de Montréal (Canada)" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Image capture step-by-step | Flower photogrammetry and 3D modeling protocol" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="http://www.plantevolution.org/photogrammetry-protocol/Figures/cover.jpg" />
  <meta property="og:description" content="This protocol is an evolving protocol used in the Joly lab at the Université de Montréal (Canada)" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Image capture step-by-step | Flower photogrammetry and 3D modeling protocol" />
  
  <meta name="twitter:description" content="This protocol is an evolving protocol used in the Joly lab at the Université de Montréal (Canada)" />
  <meta name="twitter:image" content="http://www.plantevolution.org/photogrammetry-protocol/Figures/cover.jpg" />

<meta name="author" content="Marion Leménager" />
<meta name="author" content="Jérôme Burkiewicz" />
<meta name="author" content="Daniel Schoen" />
<meta name="author" content="Diana Constanza Diaz Cardona" />
<meta name="author" content="Simon Joly" />


<meta name="date" content="2022-09-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="settings-and-preparation.html"/>
<link rel="next" href="image-post-processing.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Flower photogrammetry protocol</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#citation"><i class="fa fa-check"></i><b>1.1</b> Citation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#contributing"><i class="fa fa-check"></i><b>1.2</b> Contributing</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i><b>1.3</b> Disclaimer</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="materials.html"><a href="materials.html"><i class="fa fa-check"></i><b>2</b> Materials</a>
<ul>
<li class="chapter" data-level="2.1" data-path="materials.html"><a href="materials.html#lighting"><i class="fa fa-check"></i><b>2.1</b> Lighting</a></li>
<li class="chapter" data-level="2.2" data-path="materials.html"><a href="materials.html#turn-table"><i class="fa fa-check"></i><b>2.2</b> Turn table</a></li>
<li class="chapter" data-level="2.3" data-path="materials.html"><a href="materials.html#camera"><i class="fa fa-check"></i><b>2.3</b> Camera</a></li>
<li class="chapter" data-level="2.4" data-path="materials.html"><a href="materials.html#color-chart"><i class="fa fa-check"></i><b>2.4</b> Color chart</a></li>
<li class="chapter" data-level="2.5" data-path="materials.html"><a href="materials.html#softwares"><i class="fa fa-check"></i><b>2.5</b> Softwares</a></li>
<li class="chapter" data-level="2.6" data-path="materials.html"><a href="materials.html#flowers"><i class="fa fa-check"></i><b>2.6</b> Flowers</a></li>
<li class="chapter" data-level="2.7" data-path="materials.html"><a href="materials.html#summary-of-materials-and-software"><i class="fa fa-check"></i><b>2.7</b> Summary of materials and software</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="settings-and-preparation.html"><a href="settings-and-preparation.html"><i class="fa fa-check"></i><b>3</b> Settings and preparation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="settings-and-preparation.html"><a href="settings-and-preparation.html#camera-and-tripod-settings-and-preparation"><i class="fa fa-check"></i><b>3.1</b> Camera and tripod settings and preparation</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="settings-and-preparation.html"><a href="settings-and-preparation.html#camera-settings"><i class="fa fa-check"></i><b>3.1.1</b> Camera settings</a></li>
<li class="chapter" data-level="3.1.2" data-path="settings-and-preparation.html"><a href="settings-and-preparation.html#optional-custom-camera-white-balance"><i class="fa fa-check"></i><b>3.1.2</b> Optional : custom camera white balance</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="settings-and-preparation.html"><a href="settings-and-preparation.html#turn-table-settings-and-preparation"><i class="fa fa-check"></i><b>3.2</b> Turn table settings and preparation</a></li>
<li class="chapter" data-level="3.3" data-path="settings-and-preparation.html"><a href="settings-and-preparation.html#summary-of-settings"><i class="fa fa-check"></i><b>3.3</b> Summary of settings</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="image-capture-step-by-step.html"><a href="image-capture-step-by-step.html"><i class="fa fa-check"></i><b>4</b> Image capture step-by-step</a>
<ul>
<li class="chapter" data-level="4.1" data-path="image-capture-step-by-step.html"><a href="image-capture-step-by-step.html#take-a-picture-of-the-color-chart"><i class="fa fa-check"></i><b>4.1</b> Take a picture of the color chart</a></li>
<li class="chapter" data-level="4.2" data-path="image-capture-step-by-step.html"><a href="image-capture-step-by-step.html#flower-placement-image-capture"><i class="fa fa-check"></i><b>4.2</b> Flower placement &amp; Image capture</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="image-post-processing.html"><a href="image-post-processing.html"><i class="fa fa-check"></i><b>5</b> Image post processing</a>
<ul>
<li class="chapter" data-level="5.1" data-path="image-post-processing.html"><a href="image-post-processing.html#file-names-and-storage"><i class="fa fa-check"></i><b>5.1</b> File names and storage</a></li>
<li class="chapter" data-level="5.2" data-path="image-post-processing.html"><a href="image-post-processing.html#image-color-calibration"><i class="fa fa-check"></i><b>5.2</b> Image color calibration</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="image-post-processing.html"><a href="image-post-processing.html#creating-color-profiles"><i class="fa fa-check"></i><b>5.2.1</b> Creating color profiles</a></li>
<li class="chapter" data-level="5.2.2" data-path="image-post-processing.html"><a href="image-post-processing.html#color-and-illuminance-calibration-from-profiles"><i class="fa fa-check"></i><b>5.2.2</b> Color and illuminance calibration from profiles</a></li>
<li class="chapter" data-level="5.2.3" data-path="image-post-processing.html"><a href="image-post-processing.html#export-calibrated-files-to-jpg-format"><i class="fa fa-check"></i><b>5.2.3</b> Export calibrated files to jpg format</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html"><i class="fa fa-check"></i><b>6</b> 3D model reconstruction in Agisoft Metashape</a>
<ul>
<li class="chapter" data-level="6.1" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#download-agisoft-metashape"><i class="fa fa-check"></i><b>6.1</b> Download Agisoft Metashape</a></li>
<li class="chapter" data-level="6.2" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#initial-tweaks"><i class="fa fa-check"></i><b>6.2</b> Initial tweaks</a></li>
<li class="chapter" data-level="6.3" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#overview-of-the-model-building-pipeline"><i class="fa fa-check"></i><b>6.3</b> Overview of the model building pipeline</a></li>
<li class="chapter" data-level="6.4" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#photo-importation"><i class="fa fa-check"></i><b>6.4</b> Photo importation</a></li>
<li class="chapter" data-level="6.5" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#mask-application"><i class="fa fa-check"></i><b>6.5</b> Mask application</a></li>
<li class="chapter" data-level="6.6" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#masks-touch-ups"><i class="fa fa-check"></i><b>6.6</b> Masks touch ups</a></li>
<li class="chapter" data-level="6.7" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#camera-alignment"><i class="fa fa-check"></i><b>6.7</b> Camera alignment</a></li>
<li class="chapter" data-level="6.8" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#align-chunks-together"><i class="fa fa-check"></i><b>6.8</b> Align chunks together</a></li>
<li class="chapter" data-level="6.9" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#merge-chunks"><i class="fa fa-check"></i><b>6.9</b> Merge chunks</a></li>
<li class="chapter" data-level="6.10" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#build-3d-mesh"><i class="fa fa-check"></i><b>6.10</b> Build 3D mesh</a></li>
<li class="chapter" data-level="6.11" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#d-mesh-touch-ups"><i class="fa fa-check"></i><b>6.11</b> 3D mesh touch ups</a></li>
<li class="chapter" data-level="6.12" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#build-texture"><i class="fa fa-check"></i><b>6.12</b> Build texture</a></li>
<li class="chapter" data-level="6.13" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#scaling"><i class="fa fa-check"></i><b>6.13</b> Scaling</a></li>
<li class="chapter" data-level="6.14" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#model-orientation"><i class="fa fa-check"></i><b>6.14</b> Model orientation</a></li>
<li class="chapter" data-level="6.15" data-path="d-model-reconstruction-in-agisoft-metashape.html"><a href="d-model-reconstruction-in-agisoft-metashape.html#export-model-and-texture"><i class="fa fa-check"></i><b>6.15</b> Export model and texture</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Flower photogrammetry and 3D modeling protocol</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="image-capture-step-by-step" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Image capture step-by-step<a href="image-capture-step-by-step.html#image-capture-step-by-step" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="take-a-picture-of-the-color-chart" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Take a picture of the color chart<a href="image-capture-step-by-step.html#take-a-picture-of-the-color-chart" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><p>Set the camera settings to F/16, ISO 100, 1/20s, and RAW format.</p></li>
<li><p>Verify that you have enough space on your SD card for RAW photos (a
minimum of 163 photos, accounting for photos of labels and chart).</p></li>
<li><p>Verify that the placement of your turntable inside the lightbox will
allow to capture correctly the flower you are about to photograph
(distance from opening of the lightbox) and that the 1/20s shutter
speed captures enough light from your flower by taking an initial
photo of your flower.</p></li>
<li><p>If satisfactory go to next step. The goal here is to have a definite
set of settings that will match both your flower photos and a color
chart to subsequently calibrate all your photos that have the same
light conditions and camera settings.</p></li>
<li><p>Place the color chart where the flower will be placed, without
shadows, and exposed under the same light as the flower will be
(angled towards the LED source light in the lightbox). The camera
settings and lighting cannot be changed after this. If the lighting
or the camera settings are modified, the color chart needs to be
taken again to correct the corresponding photos.</p></li>
<li><p>Place the camera so that the entire chart is visible.</p></li>
<li><p>Take a picture of the color chart (RAW). Make sure to Incorporate
each color squares, and the corners of the chart as follows (Figure
<a href="image-capture-step-by-step.html#fig:chart">4.1</a>).</p></li>
</ol>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:chart"></span>
<img src="Figures/chart_example.png" alt="Colour chart photo taken at the beginning of the process to calibrate the photos in post process." width="33%" />
<p class="caption">
Figure 4.1: Colour chart photo taken at the beginning of the process to calibrate the photos in post process.
</p>
</div>
</div>
<div id="flower-placement-image-capture" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Flower placement &amp; Image capture<a href="image-capture-step-by-step.html#flower-placement-image-capture" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To reconstruct an accurate 3D model, it is very important to have
pictures of all the parts and details of the flowers and from several
angles. Also, the photographs need to overlap with each other for proper
alignment in the first steps of the reconstruction. For this reason,
several pictures will be taken of each flower: from different
orientation and all around the flower. We suggest that flowers should be
photographed from at least two positions (e.g., Figure <a href="image-capture-step-by-step.html#fig:flower-two-positions">4.2</a>). For more complex flowers, three positions may be required: horizontal, vertical, and upside down (Figure
<a href="image-capture-step-by-step.html#fig:flower-three-positions">4.3</a>). Note that it is better to take
more photos than less because if we can drop some pictures during the
model reconstruction, it is impossible to come back and take more
pictures if we realize that we should have taken more.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:flower-two-positions"></span>
<img src="Figures/position_2.jpg" alt="Two flower positions that are normally suficient for Gesneriaceae flowers." width="33%" /><img src="Figures/position_5.jpg" alt="Two flower positions that are normally suficient for Gesneriaceae flowers." width="33%" />
<p class="caption">
Figure 4.2: Two flower positions that are normally suficient for Gesneriaceae flowers.
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:flower-three-positions"></span>
<img src="Figures/flowerplacement_1.png" alt="More complex flowers can require the pictures to be taken from three flower positions." width="33%" /><img src="Figures/flowerplacement_2.jpg" alt="More complex flowers can require the pictures to be taken from three flower positions." width="33%" /><img src="Figures/flowerplacement_3.jpg" alt="More complex flowers can require the pictures to be taken from three flower positions." width="33%" />
<p class="caption">
Figure 4.3: More complex flowers can require the pictures to be taken from three flower positions.
</p>
</div>
<blockquote>
<p>For Gesneriaceae, we first suggest a standard orientation and an
upside-down position (Figure <a href="image-capture-step-by-step.html#fig:flower-two-positions">4.2</a>) of the flower as this generally gives satisfactory results . For more complex flowers, three positions may be required: horizontal, vertical, and upside down (Figure
<a href="image-capture-step-by-step.html#fig:flower-three-positions">4.3</a>).</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><p>Clip the camera on the flexible tripod (gorillapod) and place the
camera at one of the three position required per flower position :
high mid, and low position (see Figure <a href="image-capture-step-by-step.html#fig:camera-positions">4.4</a>.
Make sure to not use different
camera orientations (landscape vs. portrait).</p></li>
<li><p>If sepals need to be removed, use a razor blade to cut them at the
base and mark the sepal intersections with a waterproof pen to keep
track of the morphological structures.</p></li>
<li><p>Pin the flower through the peduncle or the floral receptacle and
through a block of dense foam or malleable gum. You can use several
pins to avoid any sliding of the flower during the image capture
process.</p></li>
<li><p>Make sure to place the flower so that the whole flower will be
encompassed in the camera frame as much as possible. It is best to
have the subject to take the most place as possible in the camera
frame to capture every details overall than having it entirely in
the camera frame but with poor detail quality. What counts the most
is to get several overlapping photos for each features. Make sure
that the flower is not in contact with anything as this would deform
the flower and create problems during the model reconstruction.</p></li>
<li><p>For flowers with very uniform color or with radial symmetry, it may
be important to place dots with a waterproof pen on the corolla to
facilitate manual marker positioning and/or automated pixel position
detection in the reconstruction step.</p></li>
<li><p>Place a scale (e.g., 1 cm) directly below the flower.</p></li>
<li><p>Take a picture of the flower with the label for each new positioning
of the flower. This will help to identify each group of images in
the following model construction.</p></li>
<li><p>Press the <em>rec</em> button on your smartphone using the turntable
interface to start the spin of the turntable and automated image
capture.</p></li>
<li><p>Verify occasionally the focus on the flower while the flower rotates
by pressing the square button (stop) and manually adjust the focus
if needed, then press rec to resume your spin.</p></li>
</ol>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:camera-positions"></span>
<img src="Figures/camera_position_1.JPG" alt="The three camera positions from which pictures should be taken for each flower position." width="33%" /><img src="Figures/camera_position_2.JPG" alt="The three camera positions from which pictures should be taken for each flower position." width="33%" /><img src="Figures/camera_position_3.JPG" alt="The three camera positions from which pictures should be taken for each flower position." width="33%" />
<p class="caption">
Figure 4.4: The three camera positions from which pictures should be taken for each flower position.
</p>
</div>
<blockquote>
<p>Adjust the number of flower positions and number of photos according to each flower. For intricate flowers, or flowers that can’t be captured entirely with only two positions (ventral and dorsal), you can place the flower on an another position (Figure <a href="image-capture-step-by-step.html#fig:flower-three-positions">4.3</a>). On the contrary, if the flower can’t be placed on several positions, you may need to increase the number of photos per camera height in order to have sufficient information for the software to reconstruct accurate 3D models.</p>
</blockquote>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="settings-and-preparation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="image-post-processing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-image-capture.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
